<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Happy Bhogi â€“ FINAL ULTRA FUTURISTIC 3D</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Three.js + GLTFLoader -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/loaders/GLTFLoader.js"></script>

  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: radial-gradient(circle at top, #040a25, #000);
      font-family: 'Segoe UI', sans-serif;
      color: white;
    }
    canvas { display: block; }

    .overlay { position:absolute; inset:0; pointer-events:none; }

    .fire {
      position:absolute;
      bottom:10%; left:50%;
      transform:translateX(-50%);
      width:150px; height:150px;
      background:radial-gradient(circle,#ffff66,orange,red,transparent);
      border-radius:50%;
      animation:burn 0.7s infinite alternate;
      opacity:0;
    }
    @keyframes burn { from{transform:translateX(-50%) scale(1);} to{transform:translateX(-50%) scale(1.3);} }

    .wish {
      position:absolute; top:38%; width:100%; text-align:center;
      font-size:clamp(2rem,6vw,4rem);
      font-weight:bold; letter-spacing:4px;
      color:gold; opacity:0;
      text-shadow:0 0 30px orange,0 0 70px red;
      animation:glow 1.5s infinite alternate;
    }
    @keyframes glow { from{text-shadow:0 0 20px gold;} to{text-shadow:0 0 70px orange;} }

    .smoke {
      position:absolute; bottom:15%; left:50%;
      width:20px; height:20px;
      background:rgba(200,200,200,0.4);
      border-radius:50%;
      animation:smoke 3s linear infinite;
    }
    @keyframes smoke {
      from { transform:translate(-50%,0) scale(1); opacity:0.6; }
      to { transform:translate(-50%,-120px) scale(3); opacity:0; }
    }

    button.share {
      position:absolute; bottom:20px; right:20px;
      padding:10px 18px; border:none; border-radius:20px;
      background:linear-gradient(45deg,orange,red);
      color:white; font-weight:bold; cursor:pointer; z-index:10;
    }
  </style>
</head>
<body>

<canvas id="scene"></canvas>
<div class="overlay">
  <div class="fire" id="fire"></div>
  <div class="wish" id="wish">ðŸ”¥ HAPPY BHOGI TO ALL ðŸ”¥</div>
</div>
<button class="share" id="shareBtn">ðŸ“¤ Share Bhogi</button>

<!-- Local fire.mp3 -->
<audio id="fireSound" src="fire.mp3" loop></audio>

<script>
  /* THREE.JS SCENE */
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(70,innerWidth/innerHeight,0.1,1000);
  camera.position.z = 10;

  const renderer = new THREE.WebGLRenderer({canvas:sceneEl=document.getElementById('scene'),alpha:true,antialias:true});
  renderer.setSize(innerWidth,innerHeight);
  renderer.setPixelRatio(devicePixelRatio);

  scene.add(new THREE.AmbientLight(0x00ffff,0.4));
  const fireLight = new THREE.PointLight(0xff6600,2,80);
  fireLight.position.set(0,-1,3);
  scene.add(fireLight);

  /* Trees */
  const trees=[];
  for(let i=-6;i<=6;i+=2){
    const t=new THREE.Mesh(
      new THREE.CylinderGeometry(0.2,0.4,3,10),
      new THREE.MeshStandardMaterial({color:0x00aa44})
    );
    t.position.set(i,-1.8,-4);
    scene.add(t); trees.push(t);
  }

  /* REAL 3D MODELS */
  const loader=new THREE.GLTFLoader();

  // Drone model
  loader.load('https://threejs.org/examples/models/gltf/Drone/glTF/Drone.gltf',g=>{
    const drone=g.scene;
    drone.scale.set(0.5,0.5,0.5);
    drone.position.set(0,2,0);
    scene.add(drone);
    setInterval(()=>drone.position.x=Math.sin(Date.now()*0.001)*4,16);
  });

  // Robot model
  loader.load('https://threejs.org/examples/models/gltf/RobotExpressive/RobotExpressive.glb',g=>{
    const robot=g.scene;
    robot.scale.set(0.6,0.6,0.6);
    robot.position.set(0,-2,1);
    scene.add(robot);
  });

  let t=0;
  function animate(){
    requestAnimationFrame(animate);
    t+=0.01;
    trees.forEach((tr,i)=>{ if(t>2+i*0.25) tr.rotation.z+=0.01; });
    camera.position.x=Math.sin(t*4)*0.05;
    renderer.render(scene,camera);
  }
  animate();

  /* Resize */
  addEventListener('resize',()=>{
    camera.aspect=innerWidth/innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(innerWidth,innerHeight);
  });

  /* Fire + Smoke + Sound */
  setTimeout(()=>{
    const fire = document.getElementById('fire');
    const wish = document.getElementById('wish');
    const fireAudio = document.getElementById('fireSound');

    fire.style.opacity=1;

    // Try play audio
    fireAudio.play().catch(()=>{
      // autoplay fail ayithe user interaction tarvata
      console.log('Tap anywhere to play fire sound');
      document.body.addEventListener('click',()=>fireAudio.play(),{once:true});
    });

    // Smoke particles
    for(let i=0;i<25;i++){
      const s=document.createElement('div');
      s.className='smoke';
      s.style.left=50+Math.random()*10-5+'%';
      s.style.animationDelay=Math.random()+'s';
      document.body.appendChild(s);
    }

    // Show wish
    setTimeout(()=>wish.style.opacity=1,2500);
  },4000);

  /* Day â†’ Night */
  let day=true;
  setInterval(()=>{
    day=!day;
    document.body.style.background=day
      ? 'radial-gradient(circle at top,#040a25,#000)'
      : 'radial-gradient(circle at top,#000010,#000)';
  },12000);

  /* Share */
  const shareBtn = document.getElementById('shareBtn');
  shareBtn.onclick=()=>{
    if(navigator.share){
      navigator.share({title:'Happy Bhogi',text:'ðŸ”¥ Happy Bhogi to All ðŸ”¥',url:location.href});
    } else alert('Share not supported');
  };

  /* Mobile Gyro */
  addEventListener('deviceorientation',e=>{
    if(e.gamma) camera.position.x=e.gamma*0.01;
    if(e.beta) camera.position.y=-e.beta*0.01;
  });
</script>

</body>
</html>
